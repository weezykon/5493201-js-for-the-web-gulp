"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=s.apply(e,i);function o(e){asyncGeneratorStep(r,t,n,o,a,"next",e)}function a(e){asyncGeneratorStep(r,t,n,o,a,"throw",e)}o(void 0)})}}var api="https://us-central1-open-classrooms-js-for-the-web.cloudfunctions.net/widgets",loadButton=document.getElementById("load-button");function getRequest(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",r),n.onreadystatechange=function(){4===n.readyState&&(200!==n.status&&t(JSON.parse(n.response)),e(JSON.parse(n.response)))},n.send()})}function getBlogPost(){return _getBlogPost.apply(this,arguments)}function _getBlogPost(){return(_getBlogPost=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=getRequest(api+"/generate-title"),n=getRequest(api+"/generate-lorem"),e.prev=2,e.next=5,Promise.all([t,n]);case 5:r=e.sent,o=_slicedToArray(r,2),a=o[0],i=o[1],document.querySelector("main").appendChild(buildPostElement(a.title,i.lorem)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),document.querySelector("main").appendChild(buildPostElement("An error occurred!",e.t0));case 15:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function buildPostElement(e,t){var n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("h2"),a=document.createElement("p");return n.classList.add("card"),r.classList.add("card-body"),o.classList.add("card-title"),a.classList.add("card-text"),o.textContent=e,a.textContent=t,r.appendChild(o),r.appendChild(a),n.appendChild(r),n}loadButton.addEventListener("click",_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:getBlogPost();case 1:case"end":return e.stop()}},e)})));